<!doctype html><html class=no-js><head><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://ssgtm.camunda.org/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-PP9MHKW")</script><meta charset=utf-8><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width"><meta name=description content="documentation of FINOS Fluxnova"><meta name=keywords content="fluxnova,finos,open source,free,Apache License,Apache 2.0,workflow,BPMN,BPMN 2.0,camunda,bpm,BPMS,engine,platform,process,automation,community,documentation"><meta name=author content="Fluxnova community"><meta name=robots content="noindex"><title>Multi-Tenancy | docs.fluxnova.finos.org</title>
<meta name=generator content="Hugo 0.145.0"><link rel=icon href=/fluxnova-docs-manual/img/Fluxnova_icon.svg type=image/svg+xml><link rel=icon href=/fluxnova-docs-manual/img/Fluxnova_icon.png type=image/png><link rel=stylesheet href=/fluxnova-docs-manual/css/docs.a5664b4a43817e0001981bd07c2655d12a2d2257c98f8d3b52ea0f376555fd8b.css integrity="sha256-pWZLSkOBfgABmBvQfCZV0SotIlfJj407UuoPN2VV/Ys="><link rel=canonical href=https://docs.fluxnova.finos.org/fluxnova-docs-manual/user-guide/process-engine/multi-tenancy/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PP9MHKW" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><nav class="navbar navbar-fixed-top"><div class=navbar-container><div class=navbar-header><a href=/fluxnova-docs-manual/><img src=/fluxnova-docs-manual/img/Fluxnova_icon.png style="width:40;height:40px;padding:0 5px 7px 0">
<span class=brand-name>Fluxnova</span>
<span class=site-name>Docs</span></a></div><ul class=header-menu><li><a href=/fluxnova-docs-manual/get-started/>Get Started</a></li><li><a href=/fluxnova-docs-manual/modeler/>Modeler</a></li><li class=active><a href=/fluxnova-docs-manual/>Manual</a></li><li><a href=/fluxnova-docs-manual/security/>Security</a></li></ul><button class=site-menu-toggle>
<span></span>
<span></span>
<span></span></button><div class=search-field><input type=search class=search-input placeholder=Search…></div><ul class=external-menu><li class=external><a href=https://finos.org>FINOS</a></li></ul></div></nav><div class=search-results><ul class=results-list></ul><footer><button class="btn btn-default page previous">
<span class="glyphicon glyphicon-chevron-left"></span>
</button>
<button class="search-close btn btn-default">
<span class="glyphicon glyphicon-remove"></span>
</button>
<button class="btn btn-default page next">
<span class="glyphicon glyphicon-chevron-right"></span></button></footer></div><div class=search-underlay></div><nav class=site-menu><div class="version versioned"><span class=number><a>develop</a>
(1.0)</span></div><ul class=site-menu-items><li><a href=/fluxnova-docs-manual/>Manual</a><ul><li><a href=/fluxnova-docs-manual/introduction/>Introduction</a><ul><li><a href=/fluxnova-docs-manual/introduction/downloading-fluxnova/>Download</a></li><li><a href=/fluxnova-docs-manual/introduction/licenses/>Licenses</a></li><li><a href=/fluxnova-docs-manual/introduction/implemented-standards/>Implemented Standards</a></li><li><a href=/fluxnova-docs-manual/introduction/architecture/>Architecture Overview</a></li><li><a href=/fluxnova-docs-manual/introduction/supported-environments/>Supported Environments</a></li><li><a href=/fluxnova-docs-manual/introduction/extensions/>Extensions</a></li><li><a href=/fluxnova-docs-manual/introduction/third-party-libraries/>Third-Party Libraries</a><ul><li><a href=/fluxnova-docs-manual/introduction/third-party-libraries/fluxnova-bpm-platform-license-book/>Fluxnova License Book</a></li></ul></li><li><a href=/fluxnova-docs-manual/introduction/public-api/>Public API</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/>User Guide</a><ul><li><a href=/fluxnova-docs-manual/user-guide/process-engine/>Process Engine</a><ul><li><a href=/fluxnova-docs-manual/user-guide/process-engine/process-engine-bootstrapping/>Process Engine Bootstrapping</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/process-engine-api/>Process Engine API</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/process-engine-concepts/>Process Engine Concepts</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/variables/>Process Variables</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/process-instance-modification/>Process Instance Modification</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/process-instance-restart/>Process Instance Restart</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/delegation-code/>Delegation Code</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/expression-language/>Expression Language</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/scripting/>Scripting</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/templating/>Templating</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/securing-custom-code/>Custom Code & Security</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/external-tasks/>External Tasks</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/connectors/>Connectors</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/process-versioning/>Process Versioning</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/process-instance-migration/>Process Instance Migration</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/database/>Database</a><ul><li><a href=/fluxnova-docs-manual/user-guide/process-engine/database/database-schema/>Database Schema</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/database/database-configuration/>Database Configuration</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/database/mssql-configuration/>Microsoft SQL Server and Azure SQL Database Configuration</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/database/mysql-configuration/>MySQL Database Configuration</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/database/performance/>Performance</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/history/>History</a><ul><li><a href=/fluxnova-docs-manual/user-guide/process-engine/history/history-configuration/>History configuration</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/history/user-operation-log/>User operation log</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/history/history-cleanup/>History cleanup</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/history/custom-implementation/>Custom implementation</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/deployment-cache/>Deployment Cache</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/password-hashing/>Password Hashing</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/password-policy/>Password Policy</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/transactions-in-processes/>Transactions in Processes</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/the-job-executor/>The Job Executor</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/multi-tenancy/>Multi-Tenancy</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/id-generator/>Id Generators</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/metrics/>Metrics</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/incidents/>Incidents</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/process-engine-plugins/>Process Engine Plugins</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/identity-service/>Identity Service</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/authorization-service/>Authorization Service</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/deployments/>Deployments</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/process-diagram-api/>Process Diagram Visualization</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/time-zones/>Time zones</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/decisions/>Decisions</a><ul><li><a href=/fluxnova-docs-manual/user-guide/process-engine/decisions/configuration/>Configuration</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/decisions/repository/>Repository</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/decisions/decision-service/>Decision Service</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/decisions/bpmn-cmmn/>Decisions in BPMN & CMMN</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/decisions/history/>History</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/batch/>Batch</a><ul><li><a href=/fluxnova-docs-manual/user-guide/process-engine/batch-operations/>Batch operations</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/error-handling/>Error Handling</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-engine/diagnostics-data/>Diagnostics data</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/process-applications/>Process Applications</a><ul><li><a href=/fluxnova-docs-manual/user-guide/process-applications/the-process-application-class/>The Process Application class</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-applications/the-processes-xml-deployment-descriptor/>The processes.xml Deployment Descriptor</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-applications/process-application-event-listeners/>Process Application Event Listeners</a></li><li><a href=/fluxnova-docs-manual/user-guide/process-applications/process-application-resources/>Process Application Resource Access</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/runtime-container-integration/>Runtime Container Integration</a><ul><li><a href=/fluxnova-docs-manual/user-guide/runtime-container-integration/bpm-platform-services/>Fluxnova Services</a></li><li><a href=/fluxnova-docs-manual/user-guide/runtime-container-integration/jndi-bindings-for-bpmn-platform-services/>JNDI Bindings for Fluxnova Services</a></li><li><a href=/fluxnova-docs-manual/user-guide/runtime-container-integration/tomcat/>Apache Tomcat</a></li><li><a href=/fluxnova-docs-manual/user-guide/runtime-container-integration/jboss/>WildFly</a></li><li><a href=/fluxnova-docs-manual/user-guide/runtime-container-integration/job-execution-with-managed-resources/>Job Execution with Managed Resources</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/fluxnova-bpm-run/>Fluxnova Run</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-framework-integration/>Spring Framework Integration</a><ul><li><a href=/fluxnova-docs-manual/user-guide/spring-framework-integration/configuration/>Bootstrapping</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-framework-integration/transactions/>Transactions</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-framework-integration/deployment/>Deployment</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-framework-integration/expressions/>Spring Bean Resolving</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-framework-integration/testing/>Testing</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/spring-boot-integration/>Spring Boot Integration</a><ul><li><a href=/fluxnova-docs-manual/user-guide/spring-boot-integration/version-compatibility/>Version Compatibility</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-boot-integration/configuration/>Configuration</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-boot-integration/rest-api/>REST API</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-boot-integration/webapps/>Web Applications</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-boot-integration/process-applications/>Process Applications</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-boot-integration/the-spring-event-bridge/>Spring Eventing Bridge</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-boot-integration/develop-and-test/>Developing and Testing</a></li><li><a href=/fluxnova-docs-manual/user-guide/spring-boot-integration/spring-security/>Spring Security OAuth2 Integration</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/quarkus-integration/>Quarkus Integration</a><ul><li><a href=/fluxnova-docs-manual/user-guide/quarkus-integration/version-compatibility/>Version Compatibility</a></li><li><a href=/fluxnova-docs-manual/user-guide/quarkus-integration/configuration/>Configuration</a></li><li><a href=/fluxnova-docs-manual/user-guide/quarkus-integration/cdi-integration/>Engine CDI Integration</a></li><li><a href=/fluxnova-docs-manual/user-guide/quarkus-integration/deployments/>Resource Deployments</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/cdi-java-ee-integration/>CDI and Java EE Integration</a><ul><li><a href=/fluxnova-docs-manual/user-guide/cdi-java-ee-integration/jta-transaction-integration/>JTA Transaction Integration</a></li><li><a href=/fluxnova-docs-manual/user-guide/cdi-java-ee-integration/expression-resolving/>Expression Resolving</a></li><li><a href=/fluxnova-docs-manual/user-guide/cdi-java-ee-integration/contextual-programming-model/>Contextual Programming Model</a></li><li><a href=/fluxnova-docs-manual/user-guide/cdi-java-ee-integration/built-in-beans/>Built-In Beans</a></li><li><a href=/fluxnova-docs-manual/user-guide/cdi-java-ee-integration/the-cdi-event-bridge/>CDI Event Bridge</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/testing/>Testing</a><ul><li><a href=/fluxnova-docs-manual/user-guide/testing/assert-examples/>Assert Examples</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/>Model API</a><ul><li><a href=/fluxnova-docs-manual/user-guide/model-api/bpmn-model-api/>BPMN Model API</a><ul><li><a href=/fluxnova-docs-manual/user-guide/model-api/bpmn-model-api/read-a-model/>Read a Model</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/bpmn-model-api/create-a-model/>Create a Model</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/bpmn-model-api/delegation-code/>Delegation Code</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/bpmn-model-api/fluent-builder-api/>Fluent Builder API</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/bpmn-model-api/respository-service/>Repository Service</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/bpmn-model-api/extension-elements/>Extension Elements</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/cmmn-model-api/>CMMN Model API</a><ul><li><a href=/fluxnova-docs-manual/user-guide/model-api/cmmn-model-api/read-a-model/>Read a Model</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/cmmn-model-api/create-a-model/>Create a Model</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/cmmn-model-api/delegation-code/>Delegation Code</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/cmmn-model-api/repository-service/>Repository Service</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/cmmn-model-api/extension-elements/>Extension Elements</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/cmmn-model-api/limitations/>Limitations</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/dmn-model-api/>DMN Model API</a><ul><li><a href=/fluxnova-docs-manual/user-guide/model-api/dmn-model-api/read-a-model/>Read a Model</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/dmn-model-api/create-a-model/>Create a Model</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/dmn-model-api/repository-service/>Repository Service</a></li><li><a href=/fluxnova-docs-manual/user-guide/model-api/dmn-model-api/extension-attributes/>Extension Attributes</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/data-formats/>Data Formats (XML, JSON, Other)</a><ul><li><a href=/fluxnova-docs-manual/user-guide/data-formats/configuring-spin-integration/>Configuring Spin Integration</a></li><li><a href=/fluxnova-docs-manual/user-guide/data-formats/data-formats-in-processes/>Data Formats in Processes</a></li><li><a href=/fluxnova-docs-manual/user-guide/data-formats/xml/>XML</a></li><li><a href=/fluxnova-docs-manual/user-guide/data-formats/json/>JSON</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/task-forms/>User Task Forms</a><ul><li><a href=/fluxnova-docs-manual/user-guide/task-forms/jsf-task-forms/>JSF Task Forms</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/>DMN Engine</a><ul><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/embed/>Embed</a></li><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/evaluate-decisions/>Evaluate Decisions</a></li><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/expressions-and-scripts/>Expressions</a></li><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/feel/>FEEL Engine</a><ul><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/feel/type-handling/>Type Handling</a></li><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/feel/custom-functions/>Custom Functions</a></li><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/feel/spin-integration/>Spin Integration</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/data-types/>Data Types</a></li><li><a href=/fluxnova-docs-manual/user-guide/dmn-engine/testing/>Testing</a></li></ul></li><li><a href=/fluxnova-docs-manual/user-guide/logging/>Logging</a></li><li><a href=/fluxnova-docs-manual/user-guide/security/>Security Instructions</a></li><li><a href=/fluxnova-docs-manual/user-guide/ext-client/>External Task Client</a><ul><li><a href=/fluxnova-docs-manual/user-guide/ext-client/spring-boot-starter/>Spring Boot Starter</a></li><li><a href=/fluxnova-docs-manual/user-guide/ext-client/compatibility-matrix/>Version Compatibility</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/reference/>Reference</a><ul><li><a href=/fluxnova-docs-manual/reference/rest/>REST API</a><ul><li><a href=/fluxnova-docs-manual/reference/rest/overview/>Overview</a><ul><li><a href=/fluxnova-docs-manual/reference/rest/overview/authentication/>Configure Authentication</a></li><li><a href=/fluxnova-docs-manual/reference/rest/overview/distro-use/>Usage with a Pre-Built Distribution</a></li><li><a href=/fluxnova-docs-manual/reference/rest/overview/embeddability/>Embed the API</a></li><li><a href=/fluxnova-docs-manual/reference/rest/overview/hal/>Hypertext Application Language (HAL)</a></li><li><a href=/fluxnova-docs-manual/reference/rest/overview/variables/>Variables in the REST API</a></li><li><a href=/fluxnova-docs-manual/reference/rest/overview/date-format/>Date Format</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/rest/openapi/>OpenAPI</a></li><li><a href=/fluxnova-docs-manual/reference/rest/specification/>Specification ↗</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/javadoc/>Javadoc ↗</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/>BPMN 2.0</a><ul><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/>Tasks</a><ul><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/service-task/>Service Task</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/send-task/>Send Task</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/user-task/>User Task</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/business-rule-task/>Business Rule Task</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/script-task/>Script Task</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/receive-task/>Receive Task</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/manual-task/>Manual Task</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/task-markers/>Task Markers</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/gateways/>Gateways</a><ul><li><a href=/fluxnova-docs-manual/reference/bpmn20/gateways/exclusive-gateway/>Data-based Exclusive Gateway (XOR)</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/gateways/sequence-flow/>Conditional and Default Sequence Flows</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/gateways/parallel-gateway/>Parallel Gateway</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/gateways/inclusive-gateway/>Inclusive Gateway</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/gateways/event-based-gateway/>Event-based Gateway</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/>Events</a><ul><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/start-events/>Start Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/none-events/>None Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/message-events/>Message Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/timer-events/>Timer Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/error-events/>Error Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/escalation-events/>Escalation Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/signal-events/>Signal Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/cancel-and-compensation-events/>Cancel and Compensation Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/conditional-events/>Conditional Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/link-events/>Link Events</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/events/terminate-event/>Terminate Events</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/subprocesses/>Subprocess</a><ul><li><a href=/fluxnova-docs-manual/reference/bpmn20/subprocesses/embedded-subprocess/>Embedded Subprocess</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/subprocesses/call-activity/>Call Activity</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/subprocesses/event-subprocess/>Event Subprocess</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/subprocesses/transaction-subprocess/>Transaction Subprocess</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/custom-extensions/>Extension Reference</a><ul><li><a href=/fluxnova-docs-manual/reference/bpmn20/custom-extensions/extension-elements/>Extension Elements</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/custom-extensions/extension-attributes/>Extension Attributes</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/reference/dmn/>DMN 1.3</a><ul><li><a href=/fluxnova-docs-manual/reference/dmn/decision-table/>Decision Table</a><ul><li><a href=/fluxnova-docs-manual/reference/dmn/decision-table/input/>Input</a></li><li><a href=/fluxnova-docs-manual/reference/dmn/decision-table/output/>Output</a></li><li><a href=/fluxnova-docs-manual/reference/dmn/decision-table/rule/>Rule</a></li><li><a href=/fluxnova-docs-manual/reference/dmn/decision-table/hit-policy/>Hit Policy</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/dmn/decision-literal-expression/>Decision Literal Expression</a></li><li><a href=/fluxnova-docs-manual/reference/dmn/drg/>Decision Requirements Graph</a></li><li><a href=/fluxnova-docs-manual/reference/dmn/feel/>FEEL</a><ul><li><a href=/fluxnova-docs-manual/reference/dmn/feel/legacy/>Legacy FEEL Reference</a><ul><li><a href=/fluxnova-docs-manual/reference/dmn/feel/legacy/data-types/>Data Types</a></li><li><a href=/fluxnova-docs-manual/reference/dmn/feel/legacy/language-elements/>Language Elements</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/reference/dmn/custom-extensions/>Extension Reference</a><ul><li><a href=/fluxnova-docs-manual/reference/dmn/custom-extensions/fluxnova-attributes/>Extension Attributes</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/>CMMN 1.1</a><ul><li><a href=/fluxnova-docs-manual/reference/cmmn11/api/classic-vs-fluent/>Classic vs Fluent API</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/concepts/>CMMN Concepts</a><ul><li><a href=/fluxnova-docs-manual/reference/cmmn11/concepts/plan-items/>Plan Items and Item Definitions</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/concepts/lifecycle/>Plan Item Lifecycles</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/concepts/entry-exit-criteria/>Entry and Exit Criteria</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/tasks/>Tasks</a><ul><li><a href=/fluxnova-docs-manual/reference/cmmn11/tasks/human-task/>Human Task</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/tasks/process-task/>Process Task</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/tasks/case-task/>Case Task</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/tasks/decision-task/>Decision Task</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/grouping-tasks/>Grouping Tasks</a><ul><li><a href=/fluxnova-docs-manual/reference/cmmn11/grouping-tasks/stage/>Stage</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/milestone/>Milestones</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/sentry/>Sentries</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/markers/>Markers</a><ul><li><a href=/fluxnova-docs-manual/reference/cmmn11/markers/manual-activation-rule/>Manual Activation Rule</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/markers/required-rule/>Required Rule</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/markers/auto-complete/>Auto Complete</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/markers/repetition-rule/>Repetition Rule</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/custom-extensions/>Extension Reference</a><ul><li><a href=/fluxnova-docs-manual/reference/cmmn11/custom-extensions/fluxnova-elements/>Extension Elements</a></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/custom-extensions/fluxnova-attributes/>Extension Attributes</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/cmmn11/migration/>Migration between Specification Versions</a><ul><li><a href=/fluxnova-docs-manual/reference/cmmn11/migration/10-to-11/>1.0 to 1.1</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/reference/forms/>Forms</a><ul><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/>Embedded Forms</a><ul><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/controls/>Controls</a><ul><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/controls/inputs/>Text Inputs</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/controls/textarea/>Textareas</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/controls/date-inputs/>Date Inputs</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/controls/boolean-inputs/>Boolean Inputs</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/controls/select/>Selects</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/controls/hidden/>Hidden Input Fields</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/controls/files/>File Upload and Download</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/controls/bpmn-buttons/>BPMN Event Buttons</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/javascript/>Javascript</a><ul><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/javascript/cam-script/>The cam-script Directive</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/javascript/api/>Available API</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/javascript/lifecycle/>Participating in the Form Lifecycle</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/javascript/debugging/>Debugging Scripts</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/javascript/generating-businesskey/>Generating a Business Key</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/javascript/examples/>Examples</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/lifecycle/>Lifecycle and Events</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/json-data/>Working with Json Data</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/java-objects/>Working with Java Objects</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/integrate/>Integrating the Forms SDK</a><ul><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/integrate/getting-a-distribution/>Getting a Distribution</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/integrate/bootstrapping/>Bootstrapping</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/integrate/angular-js/>AngularJS Integration</a></li><li><a href=/fluxnova-docs-manual/reference/forms/embedded-forms/integrate/full-examples/>Full Example</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/reference/forms/fluxnova-forms/>Fluxnova Forms</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/spin/>Spin Dataformats</a><ul><li><a href=/fluxnova-docs-manual/reference/spin/xml/>XML</a><ul><li><a href=/fluxnova-docs-manual/reference/spin/xml/01-reading-xml/>Reading XML</a></li><li><a href=/fluxnova-docs-manual/reference/spin/xml/02-manipulating-xml/>Manipulating XML</a></li><li><a href=/fluxnova-docs-manual/reference/spin/xml/03-writing-xml/>Writing XML</a></li><li><a href=/fluxnova-docs-manual/reference/spin/xml/04-querying-xml/>Querying XML</a></li><li><a href=/fluxnova-docs-manual/reference/spin/xml/05-mapping-xml/>Mapping XML</a></li><li><a href=/fluxnova-docs-manual/reference/spin/xml/06-configuring-xml/>Configuring XML Handling</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/spin/json/>JSON</a><ul><li><a href=/fluxnova-docs-manual/reference/spin/json/01-reading-json/>Reading JSON</a></li><li><a href=/fluxnova-docs-manual/reference/spin/json/02-writing-json/>Writing JSON</a></li><li><a href=/fluxnova-docs-manual/reference/spin/json/03-querying-json/>Querying JSON</a></li><li><a href=/fluxnova-docs-manual/reference/spin/json/04-mapping-json/>Mapping JSON</a></li><li><a href=/fluxnova-docs-manual/reference/spin/json/05-configuring-json/>Configuring JSON Handling</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/spin/extending-spin/>Extending Spin</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/connect/>Connectors</a><ul><li><a href=/fluxnova-docs-manual/reference/connect/http-connector/>HTTP Connector</a></li><li><a href=/fluxnova-docs-manual/reference/connect/soap-connector/>SOAP Connector</a></li><li><a href=/fluxnova-docs-manual/reference/connect/extending-connect/>Extending Connect</a></li></ul></li><li><a href=/fluxnova-docs-manual/reference/deployment-descriptors/>Deployment Descriptors</a><ul><li><a href=/fluxnova-docs-manual/reference/deployment-descriptors/descriptors/bpm-platform-xml/>bpm-platform.xml</a></li><li><a href=/fluxnova-docs-manual/reference/deployment-descriptors/descriptors/processes-xml/>processes.xml</a></li><li><a href=/fluxnova-docs-manual/reference/deployment-descriptors/tags/>Tags</a><ul><li><a href=/fluxnova-docs-manual/reference/deployment-descriptors/tags/job-executor/>&lt;job-executor /></a></li><li><a href=/fluxnova-docs-manual/reference/deployment-descriptors/tags/process-archive/>&lt;process-archive /></a></li><li><a href=/fluxnova-docs-manual/reference/deployment-descriptors/tags/process-engine/>&lt;process-engine /></a></li></ul></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/installation/>Installation</a><ul><li><a href=/fluxnova-docs-manual/installation/fluxnova-modeler/>Fluxnova Modeler</a></li><li><a href=/fluxnova-docs-manual/installation/database-schema/>Database Schema</a></li><li><a href=/fluxnova-docs-manual/installation/fluxnova-bpm-run/>Remote Engine Distribution</a></li><li><a href=/fluxnova-docs-manual/installation/full/>Shared Engine Distribution</a><ul><li><a href=/fluxnova-docs-manual/installation/full/tomcat/>Tomcat</a><ul><li><a href=/fluxnova-docs-manual/installation/full/tomcat/pre-packaged/>Pre-Packaged Distribution</a></li><li><a href=/fluxnova-docs-manual/installation/full/tomcat/manual/>Manual Installation</a></li><li><a href=/fluxnova-docs-manual/installation/full/tomcat/configuration/>Configuration</a></li></ul></li><li><a href=/fluxnova-docs-manual/installation/full/jboss/>JBoss EAP/WildFly</a><ul><li><a href=/fluxnova-docs-manual/installation/full/jboss/pre-packaged/>Pre-Packaged Distribution</a></li><li><a href=/fluxnova-docs-manual/installation/full/jboss/manual/>Manual Installation</a></li><li><a href=/fluxnova-docs-manual/installation/full/jboss/configuration/>Configuration</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/installation/docker/>Docker</a></li><li><a href=/fluxnova-docs-manual/installation/standalone-webapplication/>Standalone Webapplication (.war)</a></li><li><a href=/fluxnova-docs-manual/installation/spring-boot/>Spring Boot</a></li><li><a href=/fluxnova-docs-manual/installation/karaf-osgi/>Karaf / OSGi</a></li></ul></li><li><a href=/fluxnova-docs-manual/webapps/>Web Applications</a><ul><li><a href=/fluxnova-docs-manual/webapps/admin/>Admin</a><ul><li><a href=/fluxnova-docs-manual/webapps/admin/user-management/>User Management</a></li><li><a href=/fluxnova-docs-manual/webapps/admin/group-management/>Group Management</a></li><li><a href=/fluxnova-docs-manual/webapps/admin/tenant-management/>Tenant Management</a></li><li><a href=/fluxnova-docs-manual/webapps/admin/authorization-management/>Authorization Management</a></li><li><a href=/fluxnova-docs-manual/webapps/admin/system-management/>System Management</a></li><li><a href=/fluxnova-docs-manual/webapps/admin/configuration/>Configuration</a></li><li><a href=/fluxnova-docs-manual/webapps/admin/plugins/>Plugins</a></li></ul></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/>Cockpit</a><ul><li><a href=/fluxnova-docs-manual/webapps/cockpit/dashboard/>Dashboard</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/bpmn/>BPMN Processes</a><ul><li><a href=/fluxnova-docs-manual/webapps/cockpit/bpmn/dashboard/>Dashboard</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/bpmn/process-definition-view/>Process Definition View</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/bpmn/process-instance-view/>Process Instance View</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/bpmn/failed-jobs/>Failed Jobs</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/bpmn/suspension/>Suspension</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/bpmn/drilldown/>Collapsed Subprocesses</a></li></ul></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/dmn/>DMN Decisions</a><ul><li><a href=/fluxnova-docs-manual/webapps/cockpit/dmn/dashboard/>Dashboard</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/dmn/decision-definition-view/>Decision Definition View</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/dmn/decision-instance-view/>Decision Instance View</a></li></ul></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/deployment-view/>Deployments</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/batch/>Batch</a><ul><li><a href=/fluxnova-docs-manual/webapps/cockpit/batch/monitoring/>Batch View</a></li></ul></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/tasks-dashboard/>Open Tasks Dashboard</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/extend/>Extending</a><ul><li><a href=/fluxnova-docs-manual/webapps/cockpit/extend/configuration/>Configuration</a></li><li><a href=/fluxnova-docs-manual/webapps/cockpit/extend/plugins/>Plugins</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/webapps/tasklist/>Tasklist</a><ul><li><a href=/fluxnova-docs-manual/webapps/tasklist/working-with-tasklist/>Working with Tasklist</a></li><li><a href=/fluxnova-docs-manual/webapps/tasklist/dashboard/>Dashboard</a></li><li><a href=/fluxnova-docs-manual/webapps/tasklist/filters/>Filters</a></li><li><a href=/fluxnova-docs-manual/webapps/tasklist/user-assignment/>User Assignment</a></li><li><a href=/fluxnova-docs-manual/webapps/tasklist/task-lifecycle/>Task Lifecycle</a></li><li><a href=/fluxnova-docs-manual/webapps/tasklist/tasklist-plugins/>Plugins</a></li><li><a href=/fluxnova-docs-manual/webapps/tasklist/configuration/>Configuration</a></li><li><a href=/fluxnova-docs-manual/webapps/tasklist/accessibility/>Accessibility</a></li></ul></li><li><a href=/fluxnova-docs-manual/webapps/welcome/>Welcome</a><ul><li><a href=/fluxnova-docs-manual/webapps/welcome/welcome-plugins/>Plugins</a></li><li><a href=/fluxnova-docs-manual/webapps/welcome/configuration/>Configuration</a></li></ul></li><li><a href=/fluxnova-docs-manual/webapps/shared-options/>Shared Configuration Options</a><ul><li><a href=/fluxnova-docs-manual/webapps/shared-options/authentication/>Authentication</a></li><li><a href=/fluxnova-docs-manual/webapps/shared-options/cookie-security/>Cookie Security</a></li><li><a href=/fluxnova-docs-manual/webapps/shared-options/csrf-prevention/>CSRF Prevention</a></li><li><a href=/fluxnova-docs-manual/webapps/shared-options/header-security/>HTTP Header Security</a></li></ul></li></ul></li><li><a href=/fluxnova-docs-manual/examples/>Examples</a></li><li><a href=/fluxnova-docs-manual/update/>Update & Migration</a><ul><li><a href=/fluxnova-docs-manual/update/minor/>Minor Version Update</a></li><li><a href=/fluxnova-docs-manual/update/spring-boot-starter/>Spring Boot Starter Migration and Update</a></li><li><a href=/fluxnova-docs-manual/update/patch-level/>Patch Level Update</a></li><li><a href=/fluxnova-docs-manual/update/rolling-update/>Rolling Update</a></li><li><a href=/fluxnova-docs-manual/update/activiti/>Activiti Migration</a></li></ul></li></ul></li></ul><div class=meta><h4 class=header><span class="toggle glyphicon glyphicon-chevron-up"></span>
Options</h4><div class=content><label for=version-select>Version:</label>
<select id=version-select data-basepath=/manual base-url=/fluxnova-docs-manual/><option>latest</option><option>1.0</option><option selected>develop</option></select></div></div></nav><div class=page-wrapper><div class=page-content><div class=container-fluid><div class="col-xs-12 content-header"><ul class=social><li><a target=_blank title="Fluxnova related topics on Stackoverflow" href=//stackoverflow.com/questions/tagged/fluxnova+or+camunda><span class=cam-docs-stackoverflow></span></a></li><li><a target=_blank title="Fluxnova Forum" href=https://github.com/finos/fluxnova-modeler/discussions><span class=cam-docs-chat></span></a></li></ul><div class=edit-on-github><a target=_blank href=https://github.com/finos/fluxnova-docs-manual/tree/main/content/user-guide/process-engine/multi-tenancy.md><i>Edit on Github</i> <span class=cam-docs-github></span></a></div><h1 class=page-title>Multi-Tenancy</h1></div><div class="col-xs-12 content-text"><p><em>Multi-Tenancy</em> regards the case in which a single Fluxnova installation should serve more than one tenant. For each tenant, certain guarantees of isolation should be made. For example, one tenant&rsquo;s process instances should not interfere with those of another tenant.</p><p>Multi-Tenancy can be achieved in two different ways. One way is to use <a href=#one-process-engine-per-tenant>one process engine per tenant</a>. The other way is to use just one process engine and associate the data with <a href=#single-process-engine-with-tenant-identifiers>tenant identifiers</a>. The two ways differ from each other in the level of data isolation, the effort of maintenance and the scalability. A combination of both ways is also possible.</p><h1 id=single-process-engine-with-tenant-identifiers>Single Process Engine With Tenant-Identifiers</h1><p>Multi-Tenancy can be achieved with one process engine which uses tenant identifiers (i.e., tenant-ids). The data of all tenants is stored in one table (same database and schema). Isolation is provided by the means of a tenant identifier that is stored in a column.</p><figure class=image><span><img src=../img/multi-tenancy-tenant-identifiers.png title="One Process Engine with Tenant-Identifiers Architecture"></span></figure><p>The tenant identifier is specified on the deployment and is propagated to all data that is created from the deployment (e.g., process definitions, process instances, tasks, etc.). To access the data for a specific tenant, the process engine allows to filter queries by a tenant identifier or specify a tenant identifier for a command (e.g., create a process instance). Additionally, the process engine provides transparent access restrictions in combination with the Identity Service that allows to omit the tenant identifier.</p><p>Note that transparent tenant separation is not implemented for all APIs. For example, with the deployment API, a tenant can deploy a process for another tenant. Therefore it is not a supported usecase to expose such API endpoints directly to tenants. Instead, custom access checking logic should be built on top of the Fluxnova API.</p><p>It is also possible for all tenants to share the same process and decision definitions without deploying them for each tenant. Shared definitions can simplify management of the deployments in case of a larger amount of tenants.</p><div class="note bg-info docs-info"><h3>Examples</h3><p><p>Find <a href=https://github.com/finos/fluxnova-bpm-examples>examples on GitHub</a> that show how to use tenant-identifiers with</p><ul><li><a href=https://github.com/finos/fluxnova-bpm-examples/tree/master/multi-tenancy/tenant-identifier-embedded>Embedded Process Engine</a></li><li><a href=https://github.com/finos/fluxnova-bpm-examples/tree/master/multi-tenancy/tenant-identifier-shared>Shared Process Engine</a></li></ul></p></div><h2 id=deploy-definitions-for-a-tenant>Deploy Definitions for a Tenant</h2><p>To deploy definitions for a single tenant, the tenant identifier has to be set on the deployment. The given identifier is propagated to all definitions of the deployment so that they belong to the tenant.</p><p>If no tenant identifier is set then the deployment and its definitions belong to all tenants. In this case, all tenants can access the deployment and the definitions. See <a href=#shared-definitions-for-all-tenants>this section</a> to read more about how to use shared definitions.</p><h3 id=specify-the-tenant-identifier-via-java-api>Specify the Tenant Identifier via Java API</h3><p>When a deployment is created using the Repository Service, the tenant identifier can be set on the
<a href=https://docs.fluxnova.finos.org/javadocs/1.0/apidocs/org/finos/fluxnova/bpm/engine/repository/DeploymentBuilder.html>DeploymentBuilder</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>repositoryService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createDeployment</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>tenantId</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>addZipInputStream</span>(inputStream)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>deploy</span>()
</span></span></code></pre></div><h3 id=specify-the-tenant-identifier-via-deployment-descriptor>Specify the Tenant Identifier via Deployment Descriptor</h3><p>In case of a process application, the deployment is specified by a <a href=/fluxnova-docs-manual/user-guide/process-applications/the-processes-xml-deployment-descriptor/>processes.xml</a> Deployment Descriptor. Since the descriptor can contain multiple process-archives (i.e., deployments), the tenant identifier can be set on each process-archive as <code>tenantId</code> attribute.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;process-application</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.camunda.org/schema/1.0/ProcessApplication&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;process-archive</span> <span style=color:#a6e22e>tenantId=</span><span style=color:#e6db74>&#34;tenant1&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;process-engine&gt;</span>default<span style=color:#f92672>&lt;/process-engine&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;isDeleteUponUndeploy&#34;</span><span style=color:#f92672>&gt;</span>false<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;isScanForProcessDefinitions&#34;</span><span style=color:#f92672>&gt;</span>true<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/process-archive&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/process-application&gt;</span>
</span></span></code></pre></div><h3 id=specify-the-tenant-identifier-via-spring-configuration>Specify the Tenant Identifier via Spring Configuration</h3><p>When the <a href=/fluxnova-docs-manual/user-guide/spring-framework-integration/deployment/>Automatic Resource Deployment</a> of the Spring Framework Integration is used, the tenant identifier can be specified in the Process Engine Configuration as <code>deploymentTenantId</code> property.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;processEngineConfiguration&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.finos.fluxnova.bpm.engine.spring.SpringProcessEngineConfiguration&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;deploymentResources&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;array&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;value&gt;</span>classpath*:/org/finos/fluxnova/bpm/engine/spring/test/autodeployment/autodeploy.*.cmmn<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;value&gt;</span>classpath*:/org/finos/fluxnova/bpm/engine/spring/test/autodeployment/autodeploy.*.bpmn20.xml<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/array&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;deploymentTenantId&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;tenant1&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div><h3 id=versioning-of-tenant-specific-definitions>Versioning of Tenant-Specific Definitions</h3><p>When a definition is deployed for a tenant then it is assigned a version which is independent from definitions of other tenants. For example, if a new process definition is deployed for two tenants then both definitions are assigned the version <code>1</code>. The versioning within one tenant works like the <a href=/fluxnova-docs-manual/user-guide/process-engine/process-versioning/>versioning of definitions</a> that belong to no tenant.</p><h2 id=query-data-of-a-tenant>Query Data of a Tenant</h2><p>The process engine queries of tenant-specific data (e.g., Deployment Query, Process Definition Query) allows to filter by one or more tenant identifiers. If no identifier is set then the result contains the data of all tenants.</p><p>Note that the <a href=#transparent-access-restrictions-for-tenants>transparent access restrictions</a> of tenants can influence the result of a query if a user is not allowed to see the data of a tenant.</p><h3 id=query-deployments-of-a-tenant>Query Deployments of a Tenant</h3><p>To find the deployments of specific tenants, the tenant identifiers have to be passed to <code>tenantIdIn</code> on the <code>DeploymentQuery</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Deployment<span style=color:#f92672>&gt;</span> deployments <span style=color:#f92672>=</span> repositoryService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createDeploymentQuery</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>tenantIdIn</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>, <span style=color:#e6db74>&#34;tenant2&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>orderByTenantId</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>asc</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>list</span>();
</span></span></code></pre></div><p>In case of <a href=#shared-definitions-for-all-tenants>shared definitions</a>, it can be useful to filter by deployments which belong to no tenant by calling <code>withoutTenantId()</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Deployment<span style=color:#f92672>&gt;</span> deployments <span style=color:#f92672>=</span> repositoryService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createDeploymentQuery</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>withoutTenantId</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>list</span>();
</span></span></code></pre></div><p>It is also possible to filter by deployments which belong to a specific tenant or no tenant by calling <code>includeDeploymentsWithoutTenantId()</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Deployment<span style=color:#f92672>&gt;</span> deployments <span style=color:#f92672>=</span> repositoryService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createDeploymentQuery</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>tenantIdIn</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>includeDeploymentsWithoutTenantId</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>list</span>();
</span></span></code></pre></div><h3 id=query-definitions-of-a-tenant>Query Definitions of a Tenant</h3><p>Similar to the <code>DeploymentQuery</code>, the definition queries allow to filter by one or more tenants and by definitions which belong to no tenant.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>ProcessDefinition<span style=color:#f92672>&gt;</span> processDefinitions <span style=color:#f92672>=</span> repositoryService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createProcessDefinitionQuery</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>tenantIdIn</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>includeProcessDefinitionsWithoutTenantId</span>();
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>list</span>();
</span></span></code></pre></div><h2 id=run-commands-for-a-tenant>Run Commands for a Tenant</h2><p>When a definition is deployed for multiple tenants, a command can be ambiguous (e.g., start a process instance by key). If such a command is executed, a <code>ProcessEngineException</code> is thrown. To run the command successfully, the tenant identifier has to be passed to the command.</p><p>Note that the <a href=#transparent-access-restrictions-for-tenants>transparent access restrictions</a> of tenants can omit the tenant identifier if a user is only allowed to see one of the definitions.</p><h3 id=create-a-process-instance>Create a Process Instance</h3><p>To create an instance by key of a process definition which is deployed for multiple tenants, the tenant identifier has to be passed to the
<a href=https://docs.fluxnova.finos.org/javadocs/1.0/apidocs/org/finos/fluxnova/bpm/engine/runtime/ProcessInstantiationBuilder.html>ProcessInstantiationBuilder</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>runtimeService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createProcessInstanceByKey</span>(<span style=color:#e6db74>&#34;key&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>processDefinitionTenantId</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>execute</span>();
</span></span></code></pre></div><h3 id=correlate-a-message>Correlate a Message</h3><p>The <a href=/fluxnova-docs-manual/reference/bpmn20/events/message-events/#message-api>Message API</a> can be used to correlate a message to one or all tenants. In case a message can correlate to definitions or executions of multiple tenants, the tenant identifier has to be passed to the
<a href=https://docs.fluxnova.finos.org/javadocs/1.0/apidocs/org/finos/fluxnova/bpm/engine/runtime/MessageCorrelationBuilder.html>MessageCorrelationBuilder</a>. Otherwise, a <code>MismatchingMessageCorrelationException</code> is thrown.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>runtimeService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createMessageCorrelation</span>(<span style=color:#e6db74>&#34;messageName&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>tenantId</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>correlate</span>();
</span></span></code></pre></div><p>To correlate a message to all tenants, pass no tenant identifier to the builder and call <code>correlateAll()</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>runtimeService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createMessageCorrelation</span>(<span style=color:#e6db74>&#34;messageName&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>correlateAll</span>();
</span></span></code></pre></div><h3 id=send-a-signal>Send a Signal</h3><p>The <a href=/fluxnova-docs-manual/reference/bpmn20/events/signal-events/#signal-api>Signal API</a> can be used to deliver a signal to one or all tenants. Pass the tenant identifier to the
<a href=https://docs.fluxnova.finos.org/javadocs/1.0/apidocs/org/finos/fluxnova/bpm/engine/runtime/SignalEventReceivedBuilder.html>SignalEventReceivedBuilder</a> to deliver the signal to a specific tenant. If no identifier is passed then the signal is delivered to all tenants.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>runtimeService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createSignalEvent</span>(<span style=color:#e6db74>&#34;signalName&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>tenantId</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>send</span>();
</span></span></code></pre></div><p>When a signal is thrown within a process (i.e., intermediate signal event or signal end event) then the signal is delivered to definitions and executions which belong to the same tenant as the calling execution or no tenant.</p><h3 id=create-a-case-instance>Create a Case Instance</h3><p>To create an instance by key of a case definition which is deployed for multiple tenants, the tenant identifier has to be passed to the
<a href=https://docs.fluxnova.finos.org/javadocs/1.0/apidocs/org/finos/fluxnova/bpm/engine/runtime/CaseInstanceBuilder.html>CaseInstanceBuilder</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>caseService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>withCaseDefinitionByKey</span>(<span style=color:#e6db74>&#34;key&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>caseDefinitionTenantId</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>execute</span>();
</span></span></code></pre></div><h3 id=evaluate-a-decision-table>Evaluate a Decision Table</h3><p>To evaluate a decision table by key which is deployed for multiple tenants, the tenant identifier has to be passed to the
<a href=https://docs.fluxnova.finos.org/javadocs/1.0/apidocs/org/finos/fluxnova/bpm/engine/dmn/DecisionEvaluationBuilder.html>DecisionEvaluationBuilder</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>decisionService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>evaluateDecisionTableByKey</span>(<span style=color:#e6db74>&#34;key&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>decisionDefinitionTenantId</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>evaluate</span>();
</span></span></code></pre></div><h2 id=transparent-access-restrictions-for-tenants>Transparent Access Restrictions for Tenants</h2><p>When integrating Fluxnova into an application, it can be cumbersome to pass the tenant Id to each fluxnova API call. Since such an application usually also has a concept of an &ldquo;authenticated user&rdquo;, it is possible to set the list of tenant ids when setting the authentication:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>  identityService.<span style=color:#a6e22e>setAuthentication</span>(<span style=color:#e6db74>&#34;mary&#34;</span>, asList(<span style=color:#e6db74>&#34;accounting&#34;</span>), asList(<span style=color:#e6db74>&#34;tenant1&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// All API calls executed here have &#34;tenant1&#34; transparently set as tenantId</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>  identityService.<span style=color:#a6e22e>clearAuthentication</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In the above example, all API calls executed between <code>setAuthentication(...)</code> and <code>clearAuthentication()</code> are transparently executed with the list
of provided tenant Ids.</p><h3 id=query-example>Query Example</h3><p>The following query</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>  identityService.<span style=color:#a6e22e>setAuthentication</span>(<span style=color:#e6db74>&#34;mary&#34;</span>, asList(<span style=color:#e6db74>&#34;accounting&#34;</span>), asList(<span style=color:#e6db74>&#34;tenant1&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  repositoryService.<span style=color:#a6e22e>createProcessDefinitionQuery</span>().<span style=color:#a6e22e>list</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>  identityService.<span style=color:#a6e22e>clearAuthentication</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Is equivalent to</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>repositoryService.<span style=color:#a6e22e>createProcessDefinitionQuery</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>tenantIdIn</span>(<span style=color:#e6db74>&#34;tenant1&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>includeProcessDefinitionsWithoutTenantId</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>list</span>();
</span></span></code></pre></div><h3 id=task-access-example>Task Access Example</h3><p>For other commands like <code>complete()</code>, the transparent access check ensures that the authenticated user does not access
resources by other tenants:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>  identityService.<span style=color:#a6e22e>setAuthentication</span>(<span style=color:#e6db74>&#34;mary&#34;</span>, asList(<span style=color:#e6db74>&#34;accounting&#34;</span>), asList(<span style=color:#e6db74>&#34;tenant1&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// throws an exception if task has tenant id other than &#34;tenant1&#34;</span>
</span></span><span style=display:flex><span>  taskService.<span style=color:#a6e22e>complete</span>(<span style=color:#e6db74>&#34;someTaskId&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>  identityService.<span style=color:#a6e22e>clearAuthentication</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=getting-a-users-tenant-ids-from-the-identity-service>Getting a user&rsquo;s Tenant Ids from the Identity Service</h3><p>The process engine&rsquo;s Identity Service can be used to manage users, groups and tenants as well as their relationships.
The following example shows how to retrieve the lists of groups and tenants for a given user and then use these lists when setting the authentication:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Tenant<span style=color:#f92672>&gt;</span> groups <span style=color:#f92672>=</span> identityService.<span style=color:#a6e22e>createGroupQuery</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>userMember</span>(userId)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>list</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Tenant<span style=color:#f92672>&gt;</span> tenants <span style=color:#f92672>=</span> identityService.<span style=color:#a6e22e>createTenantQuery</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>userMember</span>(userId)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>includingGroupsOfUser</span>(<span style=color:#66d9ef>true</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>list</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>  identityService.<span style=color:#a6e22e>setAuthentication</span>(userId, groups, tenants);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// get all tasks visible to user.</span>
</span></span><span style=display:flex><span>  taskService.<span style=color:#a6e22e>createTaskQuery</span>().<span style=color:#a6e22e>list</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>  identityService.<span style=color:#a6e22e>clearAuthentication</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class="note bg-info docs-info"><h3>LDAP Identity Service</h3><p>The above example only works with the <a href=/fluxnova-docs-manual/user-guide/process-engine/identity-service/#the-database-identity-service>Database Identity Service</a> (i.e., the default implementation). The <a href=/fluxnova-docs-manual/user-guide/process-engine/identity-service/#the-ldap-identity-service>LDAP Identity Service</a> doesn&rsquo;t support tenants.</p></div><h3 id=fluxnova-rest-api-and-web-applications>Fluxnova Rest API and Web Applications</h3><p>The Fluxnova <a href=/fluxnova-docs-manual/reference/rest/>Rest API</a> and the web applications Cockpit and Tasklist support the transparent access restrictions. When a user logs in then he only sees and can only access the data (e.g., process definitions) that belongs to one of his tenants.</p><p>Tenants and their memberships can be managed in the <a href=/fluxnova-docs-manual/webapps/admin/tenant-management/>Admin</a> web application.</p><h3 id=disable-the-transparent-access-restrictions>Disable the Transparent Access Restrictions</h3><p>The transparent access restrictions are enabled by default. To disable the restrictions, set the <code>tenantCheckEnabled</code> property in the <a href=/fluxnova-docs-manual/user-guide/process-engine/process-engine-bootstrapping/#processengineconfiguration-bean>ProcessEngineConfiguration</a> to <code>false</code>.</p><p>Additionally, it is also possible to disable the restrictions for a single command (e.g., for a maintenance task). Use the <code>CommandContext</code> to disable and enable the restrictions for the current command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>commandContext.<span style=color:#a6e22e>disableTenantCheck</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// e.g., do maintenance tasks over all tenants</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>commandContext.<span style=color:#a6e22e>enableTenantCheck</span>();
</span></span></code></pre></div><p>Note that the restrictions can&rsquo;t be enabled for a command if they are disabled in the <code>ProcessEngineConfiguration</code>.</p><h3 id=access-all-tenants-as-administrator>Access all Tenants as Administrator</h3><p>The admin user or users who are a member of the admin group can access the data of all tenants, even if they don&rsquo;t belong to the tenants. This is useful for an administrator of a multi-tenancy application as they must manage the data of all tenants.</p><p>Define admin users by making them a member of the group <code>fluxnova-admin</code> or with the help of the <a href=/fluxnova-docs-manual/user-guide/process-engine/authorization-service/#the-administrator-authorization-plugin>Admin Authorization Plugin</a>. The Admin Authorization Plugin allows granting admin privileges to a custom user or group.</p><h2 id=shared-definitions-for-all-tenants>Shared Definitions for all Tenants</h2><p>In section <a href=#deploy-definitions-for-a-tenant>Deploy Definitions for a Tenant</a> it is explained how to deploy a Process Definition or a Decision Definition for a particular tenant. The result is that the definition is only visible to the tenant for whom it was deployed but not to other tenants. This is useful if tenants have different processes and decisions. However, there are also many situations where all tenants should share the same definitions. In such situations it is desirable to deploy a definition only once, in a way that it is visible to all tenants.
Then, when a new instance is created by a particular tenant, it should be only visible to that tenant (and administrators of course).
This can be achieved by a usage pattern we call &ldquo;Shared Definitions&rdquo;.
By the term <em>usage pattern</em> we mean that it is not a feature of Fluxnova per se but rather a specific way to use it to achieve the desired behavior.</p><div class="note bg-info docs-info"><h3>Example</h3><p>You can find an <a href=https://github.com/finos/fluxnova-bpm-examples/tree/master/multi-tenancy/tenant-identifier-shared-definitions>example</a> on <a href=https://github.com/finos/fluxnova-bpm-examples>GitHub</a> that shows how to use shared definitions.</p></div><h3 id=deploy-a-shared-definition>Deploy a Shared Definition</h3><p>Deploying a shared definition is just a &ldquo;regular&rdquo; deployment not assigning a Tenant Id to the deployment:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>repositoryService
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>createDeployment</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>addClasspathResource</span>(<span style=color:#e6db74>&#34;processes/default/mainProcess.bpmn&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>addClasspathResource</span>(<span style=color:#e6db74>&#34;processes/default/subProcess.bpmn&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>deploy</span>();
</span></span></code></pre></div><h3 id=include-shared-definitions-in-a-query>Include Shared Definitions in a Query</h3><p>Often in an application, we want to present a list of &ldquo;available&rdquo; process definitions to the user.
In a multi tenancy context with shared resources we want the list to include definitions with the following properties:</p><ul><li>tenant id is the current user&rsquo;s tenant id,</li><li>tenant id is <code>null</code> => process is a shared resource.</li></ul><p>To achieve this with a query, the query needs to restrict on the list of the user&rsquo;s tenant ids (by calling <code>tenantIdIn(...)</code>) and include definitions without a tenant id (<code>includeProcessDefinitionsWithoutTenantId()</code>). Or, looking at it the other way around: exclude all definitions which have a tenant id which is different from the current user&rsquo;s tenant id(s).</p><p>Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>repositoryService.<span style=color:#a6e22e>createProcessDefinitionQuery</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>tenantIdIn</span>(<span style=color:#e6db74>&#34;someTenantId&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>includeProcessDefinitionsWithoutTenantId</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>list</span>();
</span></span></code></pre></div><h3 id=instantiate-a-shared-definition>Instantiate a Shared Definition</h3><p>When creating (starting) a new process instance, the tenant id of the process definition is propagated to the process instance.
Shared resources do not have a tenant id which means that no tenant id is propagated automatically. To have the tenant id of the user who starts the process instances assigned to the process instance, an implementation of the
<a href=https://docs.fluxnova.finos.org/javadocs/1.0/apidocs/org/finos/fluxnova/bpm/engine/impl/cfg/multitenancy/TenantIdProvider.html>TenantIdProvider</a> SPI needs to be provided.</p><p>The <code>TenantIdProvider</code> receives a callback when an instance of a process definition, case definition or decision definition is created. It can then assign a tenant id to the newly created instance (or not).</p><p>The following example shows how to assign a tenant id to an instance based on the current authentication:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomTenantIdProvider</span> <span style=color:#66d9ef>implements</span> TenantIdProvider {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>provideTenantIdForProcessInstance</span>(TenantIdProviderProcessInstanceContext ctx) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> getTenantIdOfCurrentAuthentication();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>provideTenantIdForCaseInstance</span>(TenantIdProviderCaseInstanceContext ctx) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> getTenantIdOfCurrentAuthentication();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>provideTenantIdForHistoricDecisionInstance</span>(TenantIdProviderHistoricDecisionInstanceContext ctx) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> getTenantIdOfCurrentAuthentication();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>protected</span> String <span style=color:#a6e22e>getTenantIdOfCurrentAuthentication</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    IdentityService identityService <span style=color:#f92672>=</span> Context.<span style=color:#a6e22e>getProcessEngineConfiguration</span>().<span style=color:#a6e22e>getIdentityService</span>();
</span></span><span style=display:flex><span>    Authentication currentAuthentication <span style=color:#f92672>=</span> identityService.<span style=color:#a6e22e>getCurrentAuthentication</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (currentAuthentication <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> tenantIds <span style=color:#f92672>=</span> currentAuthentication.<span style=color:#a6e22e>getTenantIds</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (tenantIds.<span style=color:#a6e22e>size</span>() <span style=color:#f92672>==</span> 1) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> tenantIds.<span style=color:#a6e22e>get</span>(0);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (tenantIds.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> IllegalStateException(<span style=color:#e6db74>&#34;no authenticated tenant&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> IllegalStateException(<span style=color:#e6db74>&#34;more than one authenticated tenant&#34;</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> IllegalStateException(<span style=color:#e6db74>&#34;no authentication&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>To use the <code>TenantIdProvider</code>, it must be set in the Process Engine Configuration, for example using the <code>fluxnova.cfg.xml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;beans&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;processEngineConfiguration&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.finos.fluxnova.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;tenantIdProvider&#34;</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;tenantIdProvider&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;tenantIdProvider&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.finos.fluxnova.bpm.CustomTenantIdProvider&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div><p>In case of a shared process engine, the provider can be set via <a href=/fluxnova-docs-manual/user-guide/process-engine/process-engine-plugins/>Process Engine Plugin</a>.</p><h3 id=tenant-specific-behavior-with-call-activities>Tenant-specific behavior with Call Activities</h3><p>So far, we have seen that shared resources are a useful pattern if tenants have the same process definition. The advantage is that we do not have to deploy the same process definitions once per tenant. Yet, in many real world applications, the situation is somewhat in between: tenants share <em>mostly</em> the same process definitions, but there are some tenant specific variations.</p><p>A common pattern of how to deal with this is to extract the tenant-specific behavior in a separate process which is then invoked using a call activity. Tenant specific decision logic (i.e., decision tables) using a business rules task are also common.</p><p>To realize this, the call activity or business rule task needs to select the correct definition to invoke based on the tenant id of the current process instance. The <a href=https://github.com/finos/fluxnova-bpm-examples/tree/master/multi-tenancy/tenant-identifier-shared-definitions>Shared Resources Example</a> shows how to achieve this.</p><p>See also:</p><ul><li><a href=https://github.com/finos/fluxnova-bpm-examples/tree/master/multi-tenancy/tenant-identifier-shared-definitions>Shared Resources Example</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/subprocesses/call-activity/#calledelement-tenant-id>Called Element Tenant Id</a></li><li><a href=/fluxnova-docs-manual/reference/bpmn20/subprocesses/call-activity/#case-tenant-id>Case Tenant Id</a> for call activities.</li><li><a href=/fluxnova-docs-manual/reference/bpmn20/tasks/business-rule-task/#decisionref-tenant-id>Decision Ref Tenant Id</a> for business rule tasks.</li></ul><h1 id=one-process-engine-per-tenant>One Process Engine Per Tenant</h1><p>Multi-Tenancy can be achieved by providing one process engine per tenant. Each process engine is configured to use a different data source which connects the data of the tenant. The data of the tenants can be stored in different databases, in one database with different schemas or in one schema with different tables.</p><figure class=image><span><img src=../../../introduction/img/multi-tenancy-process-engine.png title="One Process Engine per Tenant Architecture"></span></figure><p>The process engines can run on the same server so that all share the same computational resources such as a data source (when isolating via schemas or tables) or a thread pool for asynchronous job execution.</p><div class="note bg-info docs-info"><h3>Tutorial</h3><p>You can see the <a href=https://github.com/finos/fluxnova-bpm-examples/tree/master/multi-tenancy/schema-isolation>example</a> how to implement multi-tenancy with data isolation by schemas.</p></div><h2 id=configure-the-process-engines>Configure the Process Engines</h2><p>The process engines can be configured in a configuration file or via Java API. Each engine should have a name that is related to a tenant such that it can be identified based on the tenant. For example, each engine can be named after the tenant it serves. See the <a href=/fluxnova-docs-manual/user-guide/process-engine/process-engine-bootstrapping/>Process Engine Bootstrapping</a> section for details.</p><h3 id=database-isolation>Database Isolation</h3><p>If different tenants should work on entirely different databases, they have to use different JDBC settings or different data sources.</p><h3 id=schema-or-table-isolation>Schema or Table Isolation</h3><p>For schema- or table-based isolation, a single data source can be used which means that resources like a connection pool can be shared among multiple engines.
To achieve this,</p><ul><li>the configuration option <a href=/fluxnova-docs-manual/reference/deployment-descriptors/tags/process-engine/#configuration-protperties>databaseTablePrefix</a> can be used to configure database access.</li><li>consider switching on the setting <code>useSharedSqlSessionFactory</code>. The setting controls whether each process engine instance should parse and maintain a local copy of the mybatis mapping files or whether a single, shared copy can be used. Since the mappings require a lot of heap (>30MB), it is recommended to switch this on. This way only one copy needs to be allocated.</li></ul><div class="note bg-warning docs-warning"><h3>Considerations for useSharedSqlSessionFactory setting</h3><p><p>The <code>useSharedSqlSessionFactory</code> setting causes caching of the mybatis sql session factory in a static field, once built.
When using this configuration setting, you need to be aware that</p><ul><li>it can only be used if all process engines which use the setting share the same datasource and transaction factory</li><li>the reference in the field, once set, is never cleared. This is usually not a problem but if it is, users must clear the field
manually by setting it to null explicitly via</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>ProcessEngineConfigurationImpl.<span style=color:#a6e22e>cachedSqlSessionFactory</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>
</span></span></code></pre></div></p></div><h3 id=job-executor-for-multiple-process-engines>Job Executor for Multiple Process Engines</h3><p>For background execution of processes and tasks, the process engine has a component called <a href=/fluxnova-docs-manual/user-guide/process-engine/the-job-executor/>job executor</a>. The job executor periodically acquires jobs from the database and submits them to a thread pool for execution. For all process applications on one server, one thread pool is used for job execution. Furthermore, it is possible to share the acquisition thread between multiple engines. This way, resources are still manageable even when a large amount of process engines are used. See the section <a href=/fluxnova-docs-manual/user-guide/process-engine/the-job-executor/#the-job-executor-and-multiple-process-engines>The Job Executor and Multiple Process Engines</a> for details.</p><h3 id=example-configuration-for-schema-isolation>Example Configuration for Schema Isolation</h3><p>Multi-Tenancy settings can be applied in the various ways of configuring a process engine. The following is an example of a <a href=/fluxnova-docs-manual/user-guide/process-engine/process-engine-bootstrapping/#configure-process-engine-in-bpm-platformxml>bpm-platform.xml</a> file that specifies engines for two tenants that share the same database but work on different schemas:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;bpm-platform</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.camunda.org/schema/1.0/BpmPlatform&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.camunda.org/schema/1.0/BpmPlatform http://www.camunda.org/schema/1.0/BpmPlatform&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;job-executor&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;job-acquisition</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;default&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/job-executor&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;process-engine</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;tenant1&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;job-acquisition&gt;</span>default<span style=color:#f92672>&lt;/job-acquisition&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;configuration&gt;</span>org.finos.fluxnova.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration<span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;datasource&gt;</span>java:jdbc/ProcessEngine<span style=color:#f92672>&lt;/datasource&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;databaseTablePrefix&#34;</span><span style=color:#f92672>&gt;</span>TENANT_1.<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;history&#34;</span><span style=color:#f92672>&gt;</span>full<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;databaseSchemaUpdate&#34;</span><span style=color:#f92672>&gt;</span>true<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;authorizationEnabled&#34;</span><span style=color:#f92672>&gt;</span>true<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;useSharedSqlSessionFactory&#34;</span><span style=color:#f92672>&gt;</span>true<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/process-engine&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;process-engine</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;tenant2&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;job-acquisition&gt;</span>default<span style=color:#f92672>&lt;/job-acquisition&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;configuration&gt;</span>org.finos.fluxnova.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration<span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;datasource&gt;</span>java:jdbc/ProcessEngine<span style=color:#f92672>&lt;/datasource&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;databaseTablePrefix&#34;</span><span style=color:#f92672>&gt;</span>TENANT_2.<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;history&#34;</span><span style=color:#f92672>&gt;</span>full<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;databaseSchemaUpdate&#34;</span><span style=color:#f92672>&gt;</span>true<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;authorizationEnabled&#34;</span><span style=color:#f92672>&gt;</span>true<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;useSharedSqlSessionFactory&#34;</span><span style=color:#f92672>&gt;</span>true<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/process-engine&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bpm-platform&gt;</span>
</span></span></code></pre></div><h2 id=deploy-definitions-for-a-tenant-1>Deploy Definitions for a Tenant</h2><p>When developing process applications, i.e., process definitions and supplementary code, some processes may be deployed to every tenant&rsquo;s engine while others are tenant-specific. The processes.xml deployment descriptor that is part of every process application offers this kind of flexibility by the concept of <em>process archives</em>. One application can contain any number of process archive deployments, each of which can be deployed to a different process engine with different resources. See the section on the <a href=/fluxnova-docs-manual/user-guide/process-applications/the-processes-xml-deployment-descriptor/>processes.xml deployment descriptor</a> for details.</p><p>The following is an example that deploys different process definitions for two tenants. It uses the configuration property <code>resourceRootPath</code> that specifies a path in the deployment that contains process definitions to deploy. Accordingly, all the processes under <code>processes/tenant1</code> on the application&rsquo;s classpath are deployed to engine <code>tenant1</code>, while all the processes under <code>processes/tenant2</code> are deployed to engine <code>tenant2</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;process-application</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.camunda.org/schema/1.0/ProcessApplication&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;process-archive</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;tenant1-archive&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;process-engine&gt;</span>tenant1<span style=color:#f92672>&lt;/process-engine&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;resourceRootPath&#34;</span><span style=color:#f92672>&gt;</span>classpath:processes/tenant1/<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;isDeleteUponUndeploy&#34;</span><span style=color:#f92672>&gt;</span>false<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;isScanForProcessDefinitions&#34;</span><span style=color:#f92672>&gt;</span>true<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/process-archive&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;process-archive</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;tenant2-archive&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;process-engine&gt;</span>tenant2<span style=color:#f92672>&lt;/process-engine&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;resourceRootPath&#34;</span><span style=color:#f92672>&gt;</span>classpath:processes/tenant2/<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;isDeleteUponUndeploy&#34;</span><span style=color:#f92672>&gt;</span>false<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;isScanForProcessDefinitions&#34;</span><span style=color:#f92672>&gt;</span>true<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/process-archive&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/process-application&gt;</span>
</span></span></code></pre></div><h2 id=access-the-process-engine-of-a-tenant>Access the Process Engine of a Tenant</h2><p>To access a specific tenant&rsquo;s process engine at runtime, it has to be identified by its name. The Fluxnova engine offers access to named engines in various programming models:</p><ul><li><strong>Plain Java API</strong>: Via the <a href=/fluxnova-docs-manual/user-guide/runtime-container-integration/bpm-platform-services/#processengineservice>ProcessEngineService</a> any named engine can be accessed.</li><li><strong>CDI Integration</strong>: Named engine beans can be injected out of the box. The <a href=/fluxnova-docs-manual/user-guide/cdi-java-ee-integration/built-in-beans/>built-in CDI bean producer</a> can be specialized to access the engine of the current tenant dynamically.</li><li><strong>Via JNDI on Wildfly</strong>: On Wildfly, every container-managed process engine can be <a href=/fluxnova-docs-manual/user-guide/runtime-container-integration/jboss/#look-up-a-process-engine-in-jndi>looked up via JNDI</a>.</li></ul><p>The Fluxnova web applications Cockpit, Tasklist and Admin offer tenant-specific views out of the box by <a href=/fluxnova-docs-manual/webapps/cockpit/dashboard/#multi-engine>switching between different process engines</a>.</p></div></div></div><div class=page-toc><h3>On this Page:</h3><nav id=TableOfContents><ul><li><a href=#single-process-engine-with-tenant-identifiers>Single Process Engine With Tenant-Identifiers</a><ul><li><a href=#deploy-definitions-for-a-tenant>Deploy Definitions for a Tenant</a><ul><li><a href=#specify-the-tenant-identifier-via-java-api>Specify the Tenant Identifier via Java API</a></li><li><a href=#specify-the-tenant-identifier-via-deployment-descriptor>Specify the Tenant Identifier via Deployment Descriptor</a></li><li><a href=#specify-the-tenant-identifier-via-spring-configuration>Specify the Tenant Identifier via Spring Configuration</a></li><li><a href=#versioning-of-tenant-specific-definitions>Versioning of Tenant-Specific Definitions</a></li></ul></li><li><a href=#query-data-of-a-tenant>Query Data of a Tenant</a><ul><li><a href=#query-deployments-of-a-tenant>Query Deployments of a Tenant</a></li><li><a href=#query-definitions-of-a-tenant>Query Definitions of a Tenant</a></li></ul></li><li><a href=#run-commands-for-a-tenant>Run Commands for a Tenant</a><ul><li><a href=#create-a-process-instance>Create a Process Instance</a></li><li><a href=#correlate-a-message>Correlate a Message</a></li><li><a href=#send-a-signal>Send a Signal</a></li><li><a href=#create-a-case-instance>Create a Case Instance</a></li><li><a href=#evaluate-a-decision-table>Evaluate a Decision Table</a></li></ul></li><li><a href=#transparent-access-restrictions-for-tenants>Transparent Access Restrictions for Tenants</a><ul><li><a href=#query-example>Query Example</a></li><li><a href=#task-access-example>Task Access Example</a></li><li><a href=#getting-a-users-tenant-ids-from-the-identity-service>Getting a user&rsquo;s Tenant Ids from the Identity Service</a></li><li><a href=#fluxnova-rest-api-and-web-applications>Fluxnova Rest API and Web Applications</a></li><li><a href=#disable-the-transparent-access-restrictions>Disable the Transparent Access Restrictions</a></li><li><a href=#access-all-tenants-as-administrator>Access all Tenants as Administrator</a></li></ul></li><li><a href=#shared-definitions-for-all-tenants>Shared Definitions for all Tenants</a><ul><li><a href=#deploy-a-shared-definition>Deploy a Shared Definition</a></li><li><a href=#include-shared-definitions-in-a-query>Include Shared Definitions in a Query</a></li><li><a href=#instantiate-a-shared-definition>Instantiate a Shared Definition</a></li><li><a href=#tenant-specific-behavior-with-call-activities>Tenant-specific behavior with Call Activities</a></li></ul></li></ul></li><li><a href=#one-process-engine-per-tenant>One Process Engine Per Tenant</a><ul><li><a href=#configure-the-process-engines>Configure the Process Engines</a><ul><li><a href=#database-isolation>Database Isolation</a></li><li><a href=#schema-or-table-isolation>Schema or Table Isolation</a></li><li><a href=#job-executor-for-multiple-process-engines>Job Executor for Multiple Process Engines</a></li><li><a href=#example-configuration-for-schema-isolation>Example Configuration for Schema Isolation</a></li></ul></li><li><a href=#deploy-definitions-for-a-tenant-1>Deploy Definitions for a Tenant</a></li><li><a href=#access-the-process-engine-of-a-tenant>Access the Process Engine of a Tenant</a></li></ul></li></ul></nav><div class=docs-banner style=display:none><blockquote><p>Passionate about open source? We'd love for you to join our community!</p><p>Check at <a href=https://finos.org/>FINOS</a>.</p></blockquote></div></div><footer class=page-footer><div class=row><div class=col-xs-12><p class=pull-right><a href=# target=_self>Back to top</a></p><p><a href=https://fluxnova.finos.org>fluxnova.finos.org</a> and <a href=/fluxnova-docs-manual/>docs.fluxnova.finos.org</a> are both part of FINOS Fluxnova.
<span class=splitter>|</span>
The Fluxnova documentation is based on <a href=https://docs.camunda.org></a>Camunda 7 Docs</a>. Redesign, name changes, and content modifications were made.
Built by <a href=https://fluxnova.finos.org>Fluxnova Project</a> and contributors &mdash; <a href=https://finos.org/privacy-policy>Privacy Statement</a> &mdash; FINOS &copy; 2026</p><p><a rel=license href=http://creativecommons.org/licenses/by-sa/3.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-sa/3.0/80x15.png></a> The content on this site is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-sa/3.0/>Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p></div></div></footer></div><script type=text/javascript src=/fluxnova-docs-manual/js/docs.b894daff4a6a80f314a907718f14cbdfeb4488a76e1b8964aa2b557f8f97978a.js integrity="sha256-uJTa/0pqgPMUqQdxjxTL3+tEiKduG4lkqitVf4+Xl4o="></script><script type=text/javascript>var _gaq=_gaq||[],pluginUrl="//www.google-analytics.com/plugins/ga/inpage_linkid.js";_gaq.push(["_require","inpage_linkid",pluginUrl]),_gaq.push(["_setAccount","UA-39060941-1"]),_gaq.push(["_setDomainName","fluxnova.finos.org"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script><script type=text/javascript id=hs-script-loader async defer src=//js.hs-scripts.com/4513465.js></script></body></html>